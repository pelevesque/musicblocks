<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>musicblocks</title>
  </head>
  <body>
    <script>
      const svgns = "http://www.w3.org/2000/svg"

      function createSVG(id, w, h, background, border) {
        const svg = document.createElementNS(svgns, "svg")
        svg.setAttribute("id", id)
        svg.setAttribute("width", w)
        svg.setAttribute("height", h)
        svg.style.background = background
        svg.style.border = border
        return svg
      }

      const svg = createSVG("svg", 298, 100, "#ffffff", "1px solid black")

      function line(x1, y1, x2, y2, stroke, strokeWidth) {
        const e = document.createElementNS(svgns, "line")
        e.setAttribute("x1", x1)
        e.setAttribute("y1", y1)
        e.setAttribute("x2", x2)
        e.setAttribute("y2", y2)
        e.setAttribute("stroke", stroke)
        e.setAttribute("stroke-width", strokeWidth)
        return e
      }

      function rect(x, y, w, h, fill) {
        const e = document.createElementNS(svgns, "rect")
        e.setAttribute("x", x)
        e.setAttribute("y", y)
        e.setAttribute("width",  w)
        e.setAttribute("height", h)
        e.setAttribute("fill", fill)
        return e
      }

      function text(text, x, y, fontSize, fontFamily) {
        const e = document.createElementNS(svgns, "text")
        e.textContent = text
        e.setAttribute("x", x)
        e.setAttribute("y", y)
        e.setAttribute("font-size", fontSize)
        e.setAttribute("font-family", fontFamily)
        return e
      }

      /* measureWidth must be divisible by 4 */
      function zebraize(xStart, y1, y2, measureWidth, c1, c2) {
        const w = measureWidth / 4
        const h = y2 - y1
        for (let i = 0; i < 4; i++) {
          const x = xStart + (i * w)
          const c = i % 2 ? c1 : c2
          const e = rect(x, y1, w, h, c)
          svg.appendChild(e)
        }
      }

      function label(t, x, y) {
        const e = text(t, x, y, "13px", "arial")
        svg.appendChild(e)
      }

      function measureLine(x, y1, y2, c) {
        const e = line(x, y1, x, y2, c, 1)
        svg.appendChild(e)
      }

      function note(x, y, w, h, c) {
        const x2 = x + w
        const e = line(x, y, x2, y, c, h)
        svg.appendChild(e)
      }

      function noteSeparator(x, y, h, c) {
        const e = line(x, y, x + 1, y, c, h)
        svg.appendChild(e)
      }

      function noteConnector(x, y, w, h, c) {
        const x2 = x + w
        const e = line(x, y, x2, y, c, h)
        svg.appendChild(e)
      }

      zebraize(75,  20, 90, 100, "#f5f5f5", "#e5e5e5")
      zebraize(175, 20, 90, 100, "#f5f5f5", "#e5e5e5")

      label("label 1", 20, 34)
      note(125, 30, 50, 6, "orange")
      note(175, 30, 50, 6, "orange")

      label("label 2", 20, 59)
      note(75,  55, 33, 6, "pink")
      note(108, 55, 33, 6, "pink")
      noteSeparator(108, 55, 6, "black")
      note(141, 55, 33, 6, "pink")
      noteSeparator(141, 55, 6, "black")
      note(241, 55, 33, 6, "pink")

      label("label 3", 20, 84)
      note(75,  80, 25, 6, "yellow")
      note(100, 80, 25, 6, "yellow")
      noteSeparator(100, 80, 6, "black")
      note(150, 80, 25, 6, "yellow")
      note(175, 80, 25, 6, "yellow")

      measureLine(75,  20, 90, "black")
      measureLine(175, 20, 90, "black")
      measureLine(275, 20, 90, "black")

      noteConnector(174, 30, 2, 2, "orange")

      document.body.appendChild(svg)
    </script>
  </body>
</html>
